<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Climate Indicators Helper Functions • climindi</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Climate Indicators Helper Functions">
<meta name="description" content="Helper functions to compute climate indicators to be used in a dplyr pipeline.">
<meta property="og:description" content="Helper functions to compute climate indicators to be used in a dplyr pipeline.">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-2M7VLSRDCB"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2M7VLSRDCB');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">climindi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rfsaldanha/climindi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="climindi">climindi<a class="anchor" aria-label="anchor" href="#climindi"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>This package offers helper functions to compute climatological normals and aggregated variables for several climate indicators in a <a href="https://www.tidyverse.org/" class="external-link">tidy</a> approach.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of climindi from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"rfsaldanha/climindi"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The package cames with dataset examples for seven different climate indicators. Let’s use the maximum temperature indicator <code>temp_max_data</code>.</p>
<div class="section level3">
<h3 id="climatological-normals">Climatological normals<a class="anchor" aria-label="anchor" href="#climatological-normals"></a>
</h3>
<p>We can compute climatological monthly normals with the <code><a href="reference/summarise_normal.html">summarise_normal()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rfsaldanha/climindi" class="external-link">climindi</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">temp_max_normals</span> <span class="op">&lt;-</span> <span class="va">temp_max_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Identify month</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Group by id variable, year and month</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">code_muni</span>, <span class="va">month</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/summarise_normal.html">summarise_normal</a></span><span class="op">(</span>date_var <span class="op">=</span> <span class="va">date</span>, value_var <span class="op">=</span> <span class="va">value</span>, year_start <span class="op">=</span> <span class="fl">1961</span>, year_end <span class="op">=</span> <span class="fl">1990</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>On this example, the function <code><a href="reference/summarise_normal.html">summarise_normal()</a></code> will receive the grouped data by municipality id and month, and compute the climatological monthly normal considering the values between 1961 and 1990.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp_max_normals</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 5</span></span>
<span><span class="co">#&gt;    code_muni month normal_mean normal_p10 normal_p90</span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1   3106200     1        27.9       24.0       31.2</span></span>
<span><span class="co">#&gt;  2   3106200     2        28.5       25.5       30.9</span></span>
<span><span class="co">#&gt;  3   3106200     3        28.3       25.4       30.9</span></span>
<span><span class="co">#&gt;  4   3106200     4        27.2       24.6       29.6</span></span>
<span><span class="co">#&gt;  5   3106200     5        25.8       22.8       28.3</span></span>
<span><span class="co">#&gt;  6   3106200     6        24.7       21.9       27.3</span></span>
<span><span class="co">#&gt;  7   3106200     7        24.4       20.9       27.2</span></span>
<span><span class="co">#&gt;  8   3106200     8        26.1       22.2       29.8</span></span>
<span><span class="co">#&gt;  9   3106200     9        27.1       22.6       31.1</span></span>
<span><span class="co">#&gt; 10   3106200    10        27.5       23.0       31.5</span></span>
<span><span class="co">#&gt; # ℹ 38 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="indicators">Indicators<a class="anchor" aria-label="anchor" href="#indicators"></a>
</h3>
<p>With the summarize functions available at the package, it is possible to compute several aggregated indicators, and some of them use the normals computed above. Thus, supply the data using the same groups structures of the normals.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indi_temp_max</span> <span class="op">&lt;-</span> <span class="va">temp_max_data</span> <span class="op">|&gt;</span></span>
<span> <span class="co"># Identify year</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="co"># Identify month</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="co"># Group by id variable, year and month</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">code_muni</span>, <span class="va">year</span>, <span class="va">month</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="co"># Compute maximum temperature indicators</span></span>
<span> <span class="fu"><a href="reference/summarise_temp_max.html">summarise_temp_max</a></span><span class="op">(</span>value_var <span class="op">=</span> <span class="va">value</span>, normals_df <span class="op">=</span> <span class="va">temp_max_normals</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="co"># Ungroup</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indi_temp_max</span></span>
<span><span class="co">#&gt; # A tibble: 3,024 × 24</span></span>
<span><span class="co">#&gt;    code_muni  year month count normal_mean normal_p10 normal_p90  mean median</span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1   3106200  1961     1    31        27.9       24.0       31.2  25.9   26.1</span></span>
<span><span class="co">#&gt;  2   3106200  1961     2    28        28.5       25.5       30.9  28.2   28.7</span></span>
<span><span class="co">#&gt;  3   3106200  1961     3    31        28.3       25.4       30.9  28.3   28.9</span></span>
<span><span class="co">#&gt;  4   3106200  1961     4    30        27.2       24.6       29.6  28.1   28.1</span></span>
<span><span class="co">#&gt;  5   3106200  1961     5    31        25.8       22.8       28.3  25.5   25.5</span></span>
<span><span class="co">#&gt;  6   3106200  1961     6    30        24.7       21.9       27.3  24.8   24.9</span></span>
<span><span class="co">#&gt;  7   3106200  1961     7    31        24.4       20.9       27.2  25.2   25.1</span></span>
<span><span class="co">#&gt;  8   3106200  1961     8    31        26.1       22.2       29.8  27.8   27.7</span></span>
<span><span class="co">#&gt;  9   3106200  1961     9    30        27.1       22.6       31.1  31.8   32.7</span></span>
<span><span class="co">#&gt; 10   3106200  1961    10    31        27.5       23.0       31.5  28.4   29.3</span></span>
<span><span class="co">#&gt; # ℹ 3,014 more rows</span></span>
<span><span class="co">#&gt; # ℹ 15 more variables: sd &lt;dbl&gt;, se &lt;dbl&gt;, max &lt;dbl&gt;, min &lt;dbl&gt;, p10 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   p25 &lt;dbl&gt;, p75 &lt;dbl&gt;, p90 &lt;dbl&gt;, heat_waves_3d &lt;int&gt;, heat_waves_5d &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   hot_days &lt;int&gt;, t_25 &lt;int&gt;, t_30 &lt;int&gt;, t_35 &lt;int&gt;, t_40 &lt;int&gt;</span></span></code></pre></div>
<p>The function <code><a href="reference/summarise_temp_max.html">summarise_temp_max()</a></code> computes a total of 19 indicators. Let’s plot one of them.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">indi_temp_max</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">year</span>,<span class="st">"-"</span>,<span class="va">month</span>,<span class="st">"-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">p90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">code_muni</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rfsaldanha/climindi/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/rfsaldanha/climindi/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing climindi</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Raphael Saldanha <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0652-8466" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raphael Saldanha.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
